(function(t){function e(e){for(var s,a,o=e[0],l=e[1],u=e[2],f=0,p=[];f<o.length;f++)a=o[f],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],s=!0,o=1;o<r.length;o++){var l=r[o];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=a(a.s=r[0]))}return t}var s={},n={app:0},i=[];function a(e){if(s[e])return s[e].exports;var r=s[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=t,a.c=s,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)a.d(r,s,function(e){return t[e]}.bind(null,s));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/effort-vue/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("64a9")},"1e65":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("f751"),r("097d");var s=r("2b0e"),n=r("5f30"),i=r.n(n),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},o=[],l=(r("034f"),r("2877")),u={},c=Object(l["a"])(u,a,o,!1,null,null,null),f=c.exports,p=r("8c4f"),h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("Header"),r("Login")],1)},d=[],v=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[t.errors.length?r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},t._l(t.errors,(function(e){return r("p",{key:e,staticClass:"error"},[t._v(t._s(e))])})),0)]):t._e(),r("div",{staticClass:"row"},[r("div",{staticClass:"col-4"},[r("div",{staticClass:"input-group"},[t._m(0),r("input",{directives:[{name:"model",rawName:"v-model",value:t.project,expression:"project"}],staticClass:"form-control",attrs:{placeholder:"Project","aria-describedby":"project-label"},domProps:{value:t.project},on:{input:function(e){e.target.composing||(t.project=e.target.value)}}})])]),r("div",{staticClass:"col-4"},[r("div",{staticClass:"input-group"},[t._m(1),r("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{placeholder:"Username","aria-describedby":"username-label"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})])]),r("div",{staticClass:"col-2"},[r("div",{staticClass:"input-group"},[r("button",{staticClass:"btn btn-primary btn-save",attrs:{type:"button"},on:{click:function(e){return t.saveData(!1)}}},[t._v("Go")])])]),r("div",{staticClass:"col-2"},[r("div",{staticClass:"input-group"},[r("button",{staticClass:"btn btn-primary btn-save",attrs:{type:"button"},on:{click:function(e){return t.saveData(!0)}}},[t._v("Spectate")])])])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 text-center"},[r("div",{staticClass:"identicon"},[r("img",{attrs:{src:t.getIdenticon(t.username),alt:t.username}})])])])])},m=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text",attrs:{id:"project-label"}},[t._v("Project")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"input-group-prepend"},[r("span",{staticClass:"input-group-text",attrs:{id:"username-label"}},[t._v("Username")])])}],g=(r("6b54"),r("28a5"),_("userid"));function b(t,e,r){var s="";if(r){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3),s="; expires="+n.toUTCString()}document.cookie=t+"="+(e||"")+s+"; path=/"}function _(t){for(var e=t+"=",r=document.cookie.split(";"),s=0;s<r.length;s++){var n=r[s];while(" "==n.charAt(0))n=n.substring(1,n.length);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null}null==g&&(g=Math.floor(1e8*Math.random()),b("userid",g));var j={name:"Login",data:function(){return{project:_("project"),username:_("username"),errors:[]}},methods:{saveData:function(t){this.errors=[],this.project||t?this.username||t?(b("project",this.project),b("username",t?"":this.username),this.$router.push("/project")):this.errors.push("Username is required"):this.errors.push("Project is required")},hash:function(t){return sha256(t)},getIdenticon:function(t){var e=this.hash(t),r=new Identicon(e,{background:[255,255,255,128],size:100}).toString();return"data:image/png;base64,"+r}}},w=j,C=(r("e5e3"),Object(l["a"])(w,v,m,!1,null,"a5f603f6",null)),y=C.exports,k=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},x=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container header"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("h1",[t._v("Planning Poker")]),r("p",[t._v("An "),r("a",{attrs:{href:"https://github.com/skotz/effort-vue"}},[t._v("open source")]),t._v(" team estimation tool built with Vue and Firebase.")])])])])}],O={name:"Header"},$=O,P=(r("8baf"),Object(l["a"])($,k,x,!1,null,null,null)),V=P.exports,U={name:"home",components:{Login:y,Header:V}},H=U,S=Object(l["a"])(H,h,d,!1,null,null,null),E=S.exports,I=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"home"},[r("Header"),r("Poker")],1)},T=[],A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-6"},[r("p",[t._v("Hello "),r("b",[t._v(t._s(t.username))]),t._v(", you've joined the "),r("a",{attrs:{href:t.getPath(),target:"_blank"}},[r("b",[t._v(t._s(t.project))])]),t._v(" project.")])]),r("div",{staticClass:"col-6"},[r("button",{staticClass:"btn btn-primary float-right",attrs:{title:"Reset Votes (Clear all votes and start a new session.)"},on:{click:t.resetVotes}},[t._v("Reset")]),r("button",{staticClass:"btn btn-primary btn-leave float-right",attrs:{title:"Show/Hide Votes (Votes will automatically be shown once everyone has voted.)"},on:{click:t.showVotes}},[t._v(t._s(t.votesHidden?"Show":"Hide"))]),r("button",{staticClass:"btn btn-leave float-right",on:{click:t.leave}},[t._v("Leave")])])]),r("div",{class:["effort-container",t.votesHidden?"effort-hide":""]},[r("div",{staticClass:"line-average",style:{top:(0==t.averageVoteHeight?-1e5:t.averageVoteHeight)+"px"}}),r("div",{staticClass:"line-average-label",style:{top:t.averageVoteHeight-20+"px"}},[t._v(t._s(t.averageVote>0?t.averageVote.toFixed(2):""))]),t._m(0),t._l(t.options,(function(e){return r("div",{key:e,class:["row","effort-row",t.myVote==e?"my-vote":""],on:{click:function(r){return t.vote(e)}}},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"effort-axis"},[t._v("\n                    "+t._s(e)+"\n                ")]),t._l(t.projectEfforts(e),(function(e){return r("div",{key:e.userid,class:["effort-user",e.userid==t.userid?"effort-self":"effort-other"],attrs:{title:e.username}},[r("img",{attrs:{src:t.getIdenticon(e.username),alt:e.username,title:e.username}})])})),r("div",{staticClass:"effort-user-insert"},[t._v(" ")])],2)])})),t._m(1),r("div",{staticClass:"row effort-votes-row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"effort-votes-axis-spacer"}),t._l(t.labels,(function(e){return r("div",{key:e,staticClass:"effort-votes-axis"},[t._v(t._s(e))])})),r("div",{staticClass:"effort-votes-axis-padding"},[t._v(" ")])],2)])],2),r("div",[t.allUsers.length>0?r("div",{staticClass:"row"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"effort-axis voters-axis"},[t._v("?")]),t._l(t.allUsers,(function(e){return r("div",{key:e.userid,class:["effort-user","benched-user",e.voted?"user-voted":"user-not-voted"]},[r("img",{attrs:{src:t.getIdenticon(e.username),alt:e.username,title:e.username}})])}))],2)]):t._e()])])},L=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row effort-row effort-row-small"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"effort-axis-spacer"})])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row effort-row effort-row-small"},[r("div",{staticClass:"col-12"},[r("div",{staticClass:"effort-axis-spacer"}),r("div",{staticClass:"effort-votes-axis-corner"})])])}],M=(r("ee1d"),r("55dd"),r("c5f6"),r("8aa5")),N=r.n(M),z={apiKey:"AIzaSyB9f2zmiSAmOeO0OyRajjddAw51sdCzP-U",authDomain:"effort-vue.firebaseapp.com",databaseURL:"https://effort-vue.firebaseio.com",projectId:"effort-vue",storageBucket:"effort-vue.appspot.com",messagingSenderId:"590099803160"},D=N.a.initializeApp(z),q=D.database(),R=-1,W=-2,B=20,F=5e3;function J(){return+new Date/1e3}function G(t,e,r){var s="";if(r){var n=new Date;n.setTime(n.getTime()+24*r*60*60*1e3),s="; expires="+n.toUTCString()}document.cookie=t+"="+(e||"")+s+"; path=/"}function K(t){for(var e=t+"=",r=document.cookie.split(";"),s=0;s<r.length;s++){var n=r[s];while(" "==n.charAt(0))n=n.substring(1,n.length);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return null}var Q=K("userid");null==Q&&(Q=Math.floor(1e8*Math.random()),G("userid",Q));var X=[1,2,3,5,8,13,20,40],Y=function(t){var e=0;while(X[e]<t)e++;var r=0==e?1:X[e]-X[e-1],s=0==e?0:X[e-1]-r*e,n=(t-s)/r;return n},Z={name:"Poker",props:{value:Number},data:function(){return{project:K("project"),username:K("username"),userid:Q,settings:{},efforts:{},options:X.slice(0,-1).reverse(),labels:[1,2,3,4],ping:null}},mounted:function(){var t=this,e=this.project;try{this.$route.query.p.length&&(e=this.$route.query.p)}catch(n){e=this.project}null!=e&&(this.project=e,G("project",e)),null==e||null==this.username?this.$router.push("/"):q.ref("effort/"+this.project+"/"+Q).set({username:this.username,effort:R,keepalive:J()});var r=this.project;q.ref("settings/"+this.project).once("value").then((function(t){var e=t.val();null!=e&&"undefined"!==typeof e.hidden||q.ref("settings/"+r).set({hidden:!0})}));var s=this.keepalive;clearInterval(this.ping),this.ping=setInterval((function(){s()}),F),this.$nextTick((function(){window.addEventListener("resize",(function(){t.updateLabels()}))})),this.updateLabels()},computed:{allUsers:function(){var t=[];for(var e in this.efforts)null!=this.efforts[e]&&null!=this.efforts[e].username&&this.efforts[e].effort!=W&&this.efforts[e].username.length&&this.efforts[e].keepalive>J()-B&&t.push({userid:e,username:this.efforts[e].username,effort:this.efforts[e].effort,voted:this.efforts[e].effort>0,last:!1,secondToLast:!1,timestamp:this.efforts[e].timestamp});return t.sort((function(t,e){return t.timestamp-e.timestamp})),t.length>0&&(t[t.length-1].last=!0),t.length>1&&(t[t.length-2].secondToLast=!0),t},noVoteUsers:function(){for(var t=this.allUsers,e=[],r=0;r<t.length;r++)t[r].effort<=0&&e.push(t[r]);return e},myVote:function(){for(var t=this.allUsers,e=0;e<t.length;e++)if(t[e].userid==Q)return t[e].effort;return-1},averageVote:function(){for(var t=0,e=0,r=this.allUsers,s=0;s<r.length;s++)r[s].effort>0&&(t+=r[s].effort,e++);return t/=e,Number.isNaN(t)?0:t},averageVoteHeight:function(){for(var t=65*this.options.length+15-1,e=40,r=t-2*e+1,s=0,n=0,i=this.allUsers,a=0;a<i.length;a++)i[a].effort>0&&(s+=i[a].effort,n++);s/=n;var o=Y(s),l=Y(1),u=Y(this.options[0]),c=(o-l)/(u-l),f=Math.ceil(c*r)+e,p=t-f;return Number.isNaN(p)?0:p},votesHidden:function(){return this.noVoteUsers.length>0&&this.settings.hidden}},created:function(){this.$bindAsObject("efforts",q.ref("effort/"+this.project)),this.$bindAsObject("settings",q.ref("settings/"+this.project))},watch:{project:function(){this.$bindAsObject("efforts",q.ref("effort/"+this.project)),this.$bindAsObject("settings",q.ref("settings/"+this.project))}},methods:{projectEfforts:function(t){var e=[];for(var r in this.efforts)null!=this.efforts[r]&&null!=this.efforts[r].username&&this.efforts[r].effort==t&&this.efforts[r].username.length&&this.efforts[r].keepalive>J()-B&&e.push({userid:r,username:this.efforts[r].username,effort:this.efforts[r].effort,timestamp:null!=this.efforts[r].timestamp?parseInt(this.efforts[r].timestamp,10):0});return e.sort((function(t,e){return t.timestamp-e.timestamp})),e},saveData:function(){G("project",this.project),G("username",this.username)},vote:function(t){q.ref("effort/"+this.project+"/"+Q).set({username:this.username,effort:t,timestamp:J(),keepalive:J()})},resetVotes:function(){for(var t=this.allUsers,e=0;e<t.length;e++)q.ref("effort/"+this.project+"/"+t[e].userid).set({username:t[e].username,effort:R,timestamp:J(),keepalive:J()});q.ref("settings/"+this.project).set({hidden:!0})},leave:function(){q.ref("effort/"+this.project+"/"+Q).set({username:this.username,effort:W,timestamp:J(),keepalive:J()}),clearInterval(this.ping),this.$router.push("/")},getPath:function(){return(window.location.href+"?").split("?")[0]+"?p="+this.project},showVotes:function(){q.ref("settings/"+this.project).set({hidden:!this.settings.hidden})},keepalive:function(){q.ref("effort/"+this.project+"/"+Q).update({keepalive:J()})},updateLabels:function(){var t=[1,2,3,4];if(window.innerWidth>=576)for(var e=t[t.length-1]+1;e<=6;e++)t.push(e);if(window.innerWidth>=768)for(var r=t[t.length-1]+1;r<=9;r++)t.push(r);if(window.innerWidth>=992)for(var s=t[t.length-1]+1;s<=13;s++)t.push(s);if(window.innerWidth>=1200)for(var n=t[t.length-1]+1;n<=16;n++)t.push(n);this.labels=t},hash:function(t){return sha256(t)},getIdenticon:function(t){var e=this.hash(t),r=new Identicon(e,{background:[255,255,255,128],size:48}).toString();return"data:image/png;base64,"+r}}},tt=Z,et=(r("5e8d"),Object(l["a"])(tt,A,L,!1,null,"a3ff5016",null)),rt=et.exports,st={name:"home",components:{Poker:rt,Header:V}},nt=st,it=Object(l["a"])(nt,I,T,!1,null,null,null),at=it.exports;s["a"].use(p["a"]);var ot=new p["a"]({routes:[{path:"/",name:"home",component:E},{path:"/project",name:"project",component:at}]});s["a"].config.productionTip=!1,s["a"].use(i.a),new s["a"]({router:ot,render:function(t){return t(f)}}).$mount("#app")},"5e8d":function(t,e,r){"use strict";r("1e65")},"64a9":function(t,e,r){},"782e":function(t,e,r){},"8baf":function(t,e,r){"use strict";r("782e")},cd97:function(t,e,r){},e5e3:function(t,e,r){"use strict";r("cd97")}});
//# sourceMappingURL=app.fae8519f.js.map